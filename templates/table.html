{% extends '/include_files/base.html' %}

{% block title %}
{{title}}
{% endblock %}

{% block content %}

<style>

    .header_row th{
        width: 170px;
    }

    td{
        margin: 0 50px;
        width: 170px;
        padding: 0 3.5px;
        transform: translateX(-40px);
        border-bottom: 2px solid black;
        border-top: 2px solid black;
    }

    .kitchen-mention{
        border: 2px solid red;
        width: 170px;
    }

</style>

<table border="1">
    <!-- Header Row -->
    <tr class="header_row">
        <th>Name</th>
        <th>Title</th>
        <th>Monday <button onclick="">Split</button></th>
        <th>Tuesday <button onclick="">Split</button></th>
        <th>Wednesday <button onclick="">Split</button></th>
        <th>Thursday <button onclick="">Split</button></th>
        <th>Friday <button onclick="">Split</button></th>
        <th>Saturday <button onclick="">Split</button></th>
        <th>Sunday <button onclick="">Split</button></th>
        <th>Total Offs</th>

    </tr>

    <table></table>


    {% for kitchen in group.sub_kitchens%}

        <tr >  
            <th ><p class="kitchen-mention">{{kitchen.name}}</p></th> <br>
        </tr>

        {% for department in kitchen.sub_departments %}

            <tr>
                <td>
                    <strong>
                        {{department.name}}
                    </strong>
                </td>
            </tr>

            <!-- <tr><th>{{department.employees, department.name, department.employees | length}}</th></tr> -->
            <table>
            {% for emp in department.employees%}


            <tr class="employeeTrs">

                <td>

                    <div style="display: flex;">

                        <button onclick="splitEmployee(this)" style="margin-right: 1px;">Split</button> <br>

                        <select>
                            {% for empl in all_employees%}

                                {% if empl.name == emp[0].name %}
                                <option value="{{empl.name}}" selected>{{empl.name}}</option>
                                {% else %}
                                <option value="{{empl.name}}" >{{empl.name}}</option>
                                {% endif %}

                            {% endfor %}
                    </select>
                    </div>
                </td>
                <td>
                    <input type="text" value="{{emp[0].title}}" name="" id="">
                </td>

                <td>

                    <select>

                        {% for program in all_programs%}
                        {% if program == emp[1]%}
                            <option value="{{program}}" selected>{{program}}</option>
                        {% else %}
                            <option value="{{program}}">{{program}}</option>
                        {% endif %}
                        {% endfor %}

                    </select>
                </td>
                <td>

                    <select>

                        {% for program in all_programs%}
                        {% if program == emp[1]%}
                            <option value="{{program}}" selected>{{program}}</option>
                        {% else %}
                            <option value="{{program}}">{{program}}</option>
                        {% endif %}
                        {% endfor %}

                    </select>
                </td>
                <td>

                    <select>

                        {% for program in all_programs%}
                        {% if program == emp[1]%}
                            <option value="{{program}}" selected>{{program}}</option>
                        {% else %}
                            <option value="{{program}}">{{program}}</option>
                        {% endif %}
                        {% endfor %}

                    </select>
                </td>
                <td>

                    <select>

                        {% for program in all_programs%}
                        {% if program == emp[1]%}
                            <option value="{{program}}" selected>{{program}}</option>
                        {% else %}
                            <option value="{{program}}">{{program}}</option>
                        {% endif %}
                        {% endfor %}

                    </select>
                </td>
                <td>

                    <select>

                        {% for program in all_programs%}
                        {% if program == emp[1]%}
                            <option value="{{program}}" selected>{{program}}</option>
                        {% else %}
                            <option value="{{program}}">{{program}}</option>
                        {% endif %}
                        {% endfor %}

                    </select>
                </td>
                <td>

                    <select>

                        {% for program in all_programs%}
                        {% if program == emp[1]%}
                            <option value="{{program}}" selected>{{program}}</option>
                        {% else %}
                            <option value="{{program}}">{{program}}</option>
                        {% endif %}
                        {% endfor %}

                    </select>
                </td>
                <td>

                    <select>

                        {% for program in all_programs%}
                        {% if program == emp[1]%}
                            <option value="{{program}}" selected>{{program}}</option>
                        {% else %}
                            <option value="{{program}}">{{program}}</option>
                        {% endif %}
                        {% endfor %}


                    </select>
                </td>

                
            </tr>

            
            
            
            {% endfor %}
            <!-- <tr><td><button onclick="addEmployee(this)">Add Employee</button></td></tr> -->
            </tr>
        </table>

        {% endfor %}

    {% endfor %}
 
</table>

<div style="display: none;">
<table>
<tr id="sample_employee_tr">

    <td>
        <select>
            <option value="" selected></option>
            {% for empl in all_employees%}
                <option value="{{empl.name}}" >{{empl.name}}</option>

            {% endfor %}
        </select>
    </td>
    <td>
        <input type="text" value="" name="" id="">
    </td>

    <td>

        <select>

            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>

            {% endfor %}

        </select>
    </td>
    <td>

        <select>

            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>

            {% endfor %}

        </select>
    </td>
    <td>

        <select>

            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>

            {% endfor %}

        </select>
    </td>
    <td>

        <select>

            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
            {% endfor %}

        </select>
    </td>
    <td>

        <select>

            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
            {% endfor %}

        </select>
    </td>
    <td>

        <select>

            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
            {% endfor %}

        </select>
    </td>
    <td>

        <select>

            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
            {% endfor %}


        </select>
    </td>

    <td>
        <button onclick="removeEmployee(this)">Remove</button>
    </td>
    
</tr>
<tr id="sample_employee_split_tr">

    <td>
        <input type="text" value="Employee Name" name="" id="emp_name">
    </td>
    <td>
        <input type="text" value="" name="" id="emp_title">
    </td>

    <td>

        <select>

            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
                

            {% endfor %}

            <option value=""></option>
        </select>
    </td>
    <td>

        <select>


            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
                

            {% endfor %}

            <option value=""></option>

        </select>
    </td>
    <td>

        <select>

            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
                

            {% endfor %}

            <option value=""></option>

        </select>
    </td>
    <td>

        <select>


            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
                

            {% endfor %}

            <option value=""></option>

        </select>
    </td>
    <td>

        <select>

            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
                

            {% endfor %}

            <option value=""></option>

        </select>
    </td>
    <td>

        <select>


            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
                

            {% endfor %}

            <option value=""></option>

        </select>
    </td>
    <td>

        <select>


            {% for program in all_programs%}

                <option value="{{program}}">{{program}}</option>
                

            {% endfor %}

            <option value=""></option>

        </select>
    </td>

    <td>
        <button onclick="removeEmployee(this)">Remove</button>
    </td>
    
</tr>
<tr id="sample_button_tr"><td><button onclick="addEmployee(this)">Add Employee</button></td></tr>


<td id="sample_remove_button">
    <button onclick="removeEmployee(this)">Remove</button>
</td>
</table>
</div>

<script>
    function splitEmployee(button) {
        var new_tr = document.getElementById('sample_employee_split_tr');
        if (!new_tr) {
            console.error("Template row with id 'sample_employee_split_tr' not found");
            return;
        }
        new_tr = new_tr.cloneNode(true);
        new_tr.removeAttribute('id');
    
        var currentRow = button.closest('tr');
    
        if (currentRow) {
            currentRow.insertAdjacentElement('afterend', new_tr);
        } else {
            console.error("Current row not found");
        }
    }

    function removeEmployee(button){

        tr = button.parentElement.parentElement

        tr.remove();
    }

    function addEmployee(button){

        var new_tr = document.getElementById('sample_employee_tr')
        
        console.log(new_tr)
        new_tr = new_tr.cloneNode(true);
        new_tr.removeAttribute('id')

        var new_bt = document.getElementById('sample_button_tr')

        console.log(new_bt)
        new_bt = new_bt.cloneNode(true);
        new_bt.removeAttribute('id')

       
        button.parentElement.parentElement.parentElement.appendChild(new_tr)
        button.parentElement.parentElement.parentElement.appendChild(new_bt)
        
        console.log(button.parentElement.parentElement)
        button.remove()

    }

</script>


{% endblock %}
